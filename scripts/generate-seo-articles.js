const fs = require('fs');
const path = require('path');
const OpenAI = require('openai');

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

// SEOæœ€é©åŒ–ã•ã‚ŒãŸçµ‚æ´»é–¢é€£ãƒˆãƒ”ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
const seoTopics = [
  // ã€é«˜æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ ã€‘çµ‚æ´»ã®åŸºæœ¬
  {
    title: "çµ‚æ´»ã¨ã¯ï¼Ÿã„ã¤ã‹ã‚‰å§‹ã‚ã‚‹ï¼Ÿ40ä»£ãƒ»50ä»£ãƒ»60ä»£ã®çµ‚æ´»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ",
    keywords: ["çµ‚æ´»ã¨ã¯", "çµ‚æ´» ã„ã¤ã‹ã‚‰", "çµ‚æ´» ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ", "çµ‚æ´» 40ä»£", "çµ‚æ´» 50ä»£"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "çµ‚æ´»ãƒãƒ¼ãƒˆã®æ›¸ãæ–¹å®Œå…¨ã‚¬ã‚¤ãƒ‰ï½œç„¡æ–™ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä»˜ãã€2024å¹´ç‰ˆã€‘",
    keywords: ["çµ‚æ´»ãƒãƒ¼ãƒˆ", "çµ‚æ´»ãƒãƒ¼ãƒˆ æ›¸ãæ–¹", "çµ‚æ´»ãƒãƒ¼ãƒˆ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ", "çµ‚æ´»ãƒãƒ¼ãƒˆ ç„¡æ–™", "çµ‚æ´»ãƒãƒ¼ãƒˆ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"],
    category: "ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒˆ",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "ã€2024å¹´æœ€æ–°ã€‘çµ‚æ´»ã‚¢ãƒ—ãƒªãŠã™ã™ã‚10é¸ï½œç„¡æ–™ã§ä½¿ãˆã‚‹äººæ°—ã‚¢ãƒ—ãƒªæ¯”è¼ƒ",
    keywords: ["çµ‚æ´»ã‚¢ãƒ—ãƒª", "çµ‚æ´»ã‚¢ãƒ—ãƒª ç„¡æ–™", "çµ‚æ´»ã‚¢ãƒ—ãƒª ãŠã™ã™ã‚", "çµ‚æ´» ã‚¹ãƒãƒ›", "ãƒ‡ã‚¸ã‚¿ãƒ«çµ‚æ´»"],
    category: "ãƒ‡ã‚¸ã‚¿ãƒ«çµ‚æ´»",
    searchVolume: "medium",
    difficulty: "åˆç´š"
  },
  
  // ã€ç›¸ç¶šãƒ»éºè¨€é–¢é€£ã€‘
  {
    title: "å…¬æ­£è¨¼æ›¸éºè¨€ã®ä½œæˆè²»ç”¨ã¯ã„ãã‚‰ï¼Ÿå¿…è¦æ›¸é¡ã¨æ‰‹ç¶šãã®æµã‚Œã€2024å¹´ç‰ˆã€‘",
    keywords: ["å…¬æ­£è¨¼æ›¸éºè¨€", "å…¬æ­£è¨¼æ›¸éºè¨€ è²»ç”¨", "å…¬æ­£è¨¼æ›¸éºè¨€ å¿…è¦æ›¸é¡", "å…¬æ­£è¨¼æ›¸éºè¨€ æ‰‹ç¶šã", "å…¬æ­£è¨¼æ›¸éºè¨€ ä½œã‚Šæ–¹"],
    category: "éºè¨€æ›¸",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  {
    title: "ç›¸ç¶šç¨ãŒã‹ã‹ã‚‰ãªã„è²¡ç”£ä¸€è¦§ï½œéèª²ç¨æ ã‚’æœ€å¤§é™æ´»ç”¨ã™ã‚‹æ–¹æ³•",
    keywords: ["ç›¸ç¶šç¨ ã‹ã‹ã‚‰ãªã„", "ç›¸ç¶šç¨ éèª²ç¨", "ç›¸ç¶šç¨ ã„ãã‚‰ã‹ã‚‰", "ç›¸ç¶šç¨ åŸºç¤æ§é™¤", "ç›¸ç¶šç¨ è¨ˆç®—"],
    category: "ç›¸ç¶šç¨",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  {
    title: "ç›¸ç¶šæ‰‹ç¶šãã®æœŸé™ä¸€è¦§è¡¨ï½œ3ãƒ¶æœˆãƒ»4ãƒ¶æœˆãƒ»10ãƒ¶æœˆä»¥å†…ã«ã‚„ã‚‹ã“ã¨",
    keywords: ["ç›¸ç¶šæ‰‹ç¶šã æœŸé™", "ç›¸ç¶š 3ãƒ¶æœˆ", "ç›¸ç¶š 10ãƒ¶æœˆ", "ç›¸ç¶šæ‰‹ç¶šã ä¸€è¦§", "ç›¸ç¶šæ‰‹ç¶šã æµã‚Œ"],
    category: "ç›¸ç¶šæ‰‹ç¶šã",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€è‘¬å„€ãƒ»ãŠå¢“é–¢é€£ã€‘
  {
    title: "å®¶æ—è‘¬ã®è²»ç”¨ç›¸å ´ã¯ï¼Ÿ20ä¸‡å††ã€œ100ä¸‡å††ã®å†…è¨³ã¨å®‰ãã™ã‚‹æ–¹æ³•",
    keywords: ["å®¶æ—è‘¬ è²»ç”¨", "å®¶æ—è‘¬ ç›¸å ´", "å®¶æ—è‘¬ å®‰ã„", "å®¶æ—è‘¬ã¨ã¯", "å®¶æ—è‘¬ ãƒ¡ãƒªãƒƒãƒˆ"],
    category: "è‘¬å„€ãƒ»ãŠå¢“",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "å¢“ã˜ã¾ã„ã®è²»ç”¨ã¨æ‰‹ç¶šãï½œé›¢æª€æ–™ãƒ»æ’¤å»è²»ç”¨ã®ç›¸å ´ã¨æ³¨æ„ç‚¹",
    keywords: ["å¢“ã˜ã¾ã„", "å¢“ã˜ã¾ã„ è²»ç”¨", "å¢“ã˜ã¾ã„ æ‰‹ç¶šã", "é›¢æª€æ–™", "å¢“ã˜ã¾ã„ ãƒˆãƒ©ãƒ–ãƒ«"],
    category: "è‘¬å„€ãƒ»ãŠå¢“",
    searchVolume: "medium",
    difficulty: "ä¸­ç´š"
  },
  {
    title: "æµ·æ´‹æ•£éª¨ã®è²»ç”¨ã¨æ³•å¾‹ï½œé•æ³•ã«ãªã‚‰ãªã„ãŸã‚ã®æ‰‹ç¶šãã‚¬ã‚¤ãƒ‰",
    keywords: ["æµ·æ´‹æ•£éª¨", "æµ·æ´‹æ•£éª¨ è²»ç”¨", "æµ·æ´‹æ•£éª¨ é•æ³•", "æµ·æ´‹æ•£éª¨ æ‰‹ç¶šã", "æ•£éª¨ æ³•å¾‹"],
    category: "è‘¬å„€ãƒ»ãŠå¢“",
    searchVolume: "medium",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ç”Ÿå‰æ•´ç†ãƒ»æ–­æ¨é›¢ã€‘
  {
    title: "ç”Ÿå‰æ•´ç†ã¯ã„ã¤ã‹ã‚‰ï¼Ÿ40ä»£ãƒ»50ä»£ãƒ»60ä»£ã®æ–­æ¨é›¢ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ",
    keywords: ["ç”Ÿå‰æ•´ç†", "ç”Ÿå‰æ•´ç† ã„ã¤ã‹ã‚‰", "ç”Ÿå‰æ•´ç† ã‚„ã‚Šæ–¹", "æ–­æ¨é›¢ çµ‚æ´»", "ç”Ÿå‰æ•´ç† ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "éºå“æ•´ç†æ¥­è€…ã®é¸ã³æ–¹ï½œæ–™é‡‘ç›¸å ´ã¨æ‚ªå¾³æ¥­è€…ã‚’è¦‹åˆ†ã‘ã‚‹5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ",
    keywords: ["éºå“æ•´ç†æ¥­è€…", "éºå“æ•´ç† è²»ç”¨", "éºå“æ•´ç† ç›¸å ´", "éºå“æ•´ç†æ¥­è€… é¸ã³æ–¹", "éºå“æ•´ç† ãƒˆãƒ©ãƒ–ãƒ«"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€åŒ»ç™‚ãƒ»ä»‹è­·é–¢é€£ã€‘
  {
    title: "å»¶å‘½æ²»ç™‚ã®æ„æ€è¡¨ç¤ºã‚«ãƒ¼ãƒ‰ï½œå°Šå³æ­»å®£è¨€æ›¸ã®æ›¸ãæ–¹ã¨æ³•çš„åŠ¹åŠ›",
    keywords: ["å»¶å‘½æ²»ç™‚ æ„æ€è¡¨ç¤º", "å°Šå³æ­»å®£è¨€æ›¸", "å»¶å‘½æ²»ç™‚ã—ãªã„", "ãƒªãƒ“ãƒ³ã‚°ã‚¦ã‚£ãƒ«", "çµ‚æœ«æœŸåŒ»ç™‚"],
    category: "åŒ»ç™‚ãƒ»ä»‹è­·",
    searchVolume: "medium",
    difficulty: "ä¸­ç´š"
  },
  {
    title: "ä»‹è­·ä¿é™ºã®ç”³è«‹æ–¹æ³•ï½œè¦ä»‹è­·èªå®šã®æµã‚Œã¨èªå®šåŸºæº–ã€2024å¹´ç‰ˆã€‘",
    keywords: ["ä»‹è­·ä¿é™º ç”³è«‹", "è¦ä»‹è­·èªå®š", "ä»‹è­·ä¿é™º æ‰‹ç¶šã", "è¦ä»‹è­·èªå®š åŸºæº–", "ä»‹è­·ä¿é™º ã„ã¤ã‹ã‚‰"],
    category: "ä»‹è­·ãƒ»ç¦ç¥‰",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ãƒ‡ã‚¸ã‚¿ãƒ«éºå“ã€‘
  {
    title: "ãƒ‡ã‚¸ã‚¿ãƒ«éºå“æ•´ç†ã®æ–¹æ³•ï½œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ã¨å¼•ãç¶™ãæº–å‚™ãƒªã‚¹ãƒˆ",
    keywords: ["ãƒ‡ã‚¸ã‚¿ãƒ«éºå“", "ãƒ‡ã‚¸ã‚¿ãƒ«éºå“æ•´ç†", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ å¼•ãç¶™ã", "SNS æ­»å¾Œ", "ãƒ‡ã‚¸ã‚¿ãƒ«çµ‚æ´»"],
    category: "ãƒ‡ã‚¸ã‚¿ãƒ«çµ‚æ´»",
    searchVolume: "medium",
    difficulty: "åˆç´š"
  },
  {
    title: "æ•…äººã®ã‚¹ãƒãƒ›ã®ãƒ­ãƒƒã‚¯è§£é™¤æ–¹æ³•ï½œiPhoneãƒ»Androidåˆ¥å¯¾å‡¦æ³•",
    keywords: ["æ•…äºº ã‚¹ãƒãƒ› ãƒ­ãƒƒã‚¯è§£é™¤", "iPhone ãƒ­ãƒƒã‚¯è§£é™¤ æ­»äº¡", "Android ãƒ­ãƒƒã‚¯è§£é™¤ æ•…äºº", "ãƒ‡ã‚¸ã‚¿ãƒ«éºå“ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"],
    category: "ãƒ‡ã‚¸ã‚¿ãƒ«çµ‚æ´»",
    searchVolume: "medium",
    difficulty: "ä¸Šç´š"
  },
  
  // ã€åœ°åŸŸåˆ¥ãƒ»å¹´ä»£åˆ¥ã€‘
  {
    title: "æ±äº¬éƒ½ã®çµ‚æ´»æ”¯æ´ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ï½œç„¡æ–™ç›¸è«‡çª“å£ã¨è£œåŠ©é‡‘åˆ¶åº¦",
    keywords: ["çµ‚æ´» æ±äº¬", "çµ‚æ´»æ”¯æ´ æ±äº¬éƒ½", "çµ‚æ´»ç›¸è«‡ ç„¡æ–™", "çµ‚æ´» è£œåŠ©é‡‘", "çµ‚æ´»ã‚»ãƒŸãƒŠãƒ¼ æ±äº¬"],
    category: "åœ°åŸŸæƒ…å ±",
    searchVolume: "medium",
    difficulty: "åˆç´š"
  },
  {
    title: "30ä»£ãƒ»40ä»£ã®çµ‚æ´»ï½œè‹¥ã„ä¸–ä»£ãŒä»Šã‚„ã‚‹ã¹ã5ã¤ã®æº–å‚™",
    keywords: ["çµ‚æ´» 30ä»£", "çµ‚æ´» 40ä»£", "çµ‚æ´» è‹¥ã„", "çµ‚æ´» ç‹¬èº«", "çµ‚æ´» å­ä¾›ãŒã„ãªã„"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "medium",
    difficulty: "åˆç´š"
  },
  
  // ã€è²»ç”¨ãƒ»ãŠé‡‘é–¢é€£ã€‘
  {
    title: "çµ‚æ´»ã«ã‹ã‹ã‚‹è²»ç”¨ç·é¡ï½œé …ç›®åˆ¥ã®ç›¸å ´ã¨ç¯€ç´„ãƒã‚¤ãƒ³ãƒˆ",
    keywords: ["çµ‚æ´» è²»ç”¨", "çµ‚æ´» ãŠé‡‘", "çµ‚æ´» è²»ç”¨ ç·é¡", "çµ‚æ´» ç¯€ç´„", "çµ‚æ´» äºˆç®—"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "è€å¾Œè³‡é‡‘2000ä¸‡å††å•é¡Œã®çœŸå®Ÿï½œæœ¬å½“ã«å¿…è¦ãªé‡‘é¡ã¨æº–å‚™æ–¹æ³•",
    keywords: ["è€å¾Œè³‡é‡‘ 2000ä¸‡å††", "è€å¾Œè³‡é‡‘ ã„ãã‚‰", "è€å¾Œè³‡é‡‘ æº–å‚™", "è€å¾Œ ãŠé‡‘", "å®šå¹´å¾Œ ç”Ÿæ´»è²»"],
    category: "ä¿é™ºãƒ»ç¨å‹™",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»æœ€æ–°æƒ…å ±ã€‘
  {
    title: "2024å¹´ç›¸ç¶šæ³•æ”¹æ­£ã®ãƒã‚¤ãƒ³ãƒˆï½œéºç”£åˆ†å‰²ã®ãƒ«ãƒ¼ãƒ«ã¯ã“ã†å¤‰ã‚ã‚‹",
    keywords: ["ç›¸ç¶šæ³•æ”¹æ­£ 2024", "ç›¸ç¶šæ³• æ”¹æ­£", "ç›¸ç¶š æ–°ã—ã„æ³•å¾‹", "ç›¸ç¶šãƒ«ãƒ¼ãƒ« å¤‰æ›´", "ç›¸ç¶šæ³•æ”¹æ­£ ã„ã¤ã‹ã‚‰"],
    category: "æ³•çš„åˆ¶åº¦",
    searchVolume: "high",
    difficulty: "ä¸Šç´š"
  },
  {
    title: "çµ‚æ´»ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã«ãªã‚‹ã«ã¯ï¼Ÿè³‡æ ¼å–å¾—æ–¹æ³•ã¨ä»•äº‹å†…å®¹ãƒ»å¹´å",
    keywords: ["çµ‚æ´»ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼", "çµ‚æ´»ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ è³‡æ ¼", "çµ‚æ´»ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ ãªã‚‹ã«ã¯", "çµ‚æ´»ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼", "çµ‚æ´» ä»•äº‹"],
    category: "ãã®ä»–",
    searchVolume: "medium",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€å…·ä½“çš„ãªæ‰‹ç¶šãã€‘
  {
    title: "æ­»äº¡å±Šã®æå‡ºæœŸé™ã¨æ›¸ãæ–¹ï½œåœŸæ—¥ã§ã‚‚æå‡ºã§ãã‚‹ï¼Ÿå¿…è¦æ›¸é¡ä¸€è¦§",
    keywords: ["æ­»äº¡å±Š", "æ­»äº¡å±Š æå‡ºæœŸé™", "æ­»äº¡å±Š æ›¸ãæ–¹", "æ­»äº¡å±Š åœŸæ—¥", "æ­»äº¡å±Š å¿…è¦æ›¸é¡"],
    category: "ç›¸ç¶šæ‰‹ç¶šã",
    searchVolume: "high",
    difficulty: "åˆç´š"
  },
  {
    title: "éŠ€è¡Œå£åº§ã®ç›¸ç¶šæ‰‹ç¶šãï½œå‡çµè§£é™¤ã®æ–¹æ³•ã¨å¿…è¦æ›¸é¡ã€éŠ€è¡Œåˆ¥ã€‘",
    keywords: ["éŠ€è¡Œå£åº§ ç›¸ç¶š", "å£åº§å‡çµ è§£é™¤", "ç›¸ç¶š éŠ€è¡Œæ‰‹ç¶šã", "éŠ€è¡Œå£åº§ åç¾©å¤‰æ›´", "ç›¸ç¶š å¿…è¦æ›¸é¡"],
    category: "ç›¸ç¶šæ‰‹ç¶šã",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ãƒšãƒƒãƒˆé–¢é€£ã€‘
  {
    title: "ãƒšãƒƒãƒˆã®çµ‚æ´»ï½œé£¼ã„ä¸»ãŒäº¡ããªã£ãŸå¾Œã®æº–å‚™ã¨ä¿¡è¨—å¥‘ç´„",
    keywords: ["ãƒšãƒƒãƒˆ çµ‚æ´»", "ãƒšãƒƒãƒˆä¿¡è¨—", "ãƒšãƒƒãƒˆ é£¼ã„ä¸» æ­»äº¡", "ãƒšãƒƒãƒˆ ç›¸ç¶š", "ãƒšãƒƒãƒˆ éºè¨€"],
    category: "ãã®ä»–",
    searchVolume: "medium",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ä¸€äººæš®ã‚‰ã—ãƒ»ç‹¬èº«ã€‘
  {
    title: "ãŠã²ã¨ã‚Šã•ã¾ã®çµ‚æ´»å®Œå…¨ã‚¬ã‚¤ãƒ‰ï½œèº«å¯„ã‚ŠãŒãªã„äººã®æº–å‚™ãƒªã‚¹ãƒˆ",
    keywords: ["ãŠã²ã¨ã‚Šã•ã¾ çµ‚æ´»", "ä¸€äººæš®ã‚‰ã— çµ‚æ´»", "ç‹¬èº« çµ‚æ´»", "èº«å¯„ã‚ŠãŒãªã„", "å­¤ç‹¬æ­»å¯¾ç­–"],
    category: "ç”Ÿå‰æº–å‚™",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  },
  
  // ã€ä¸å‹•ç”£é–¢é€£ã€‘
  {
    title: "å®Ÿå®¶ã®ç›¸ç¶šã©ã†ã™ã‚‹ï¼Ÿç©ºãå®¶ã«ã—ãªã„3ã¤ã®é¸æŠè‚¢ã¨ç¨é‡‘å¯¾ç­–",
    keywords: ["å®Ÿå®¶ ç›¸ç¶š", "ç©ºãå®¶ ç›¸ç¶š", "å®Ÿå®¶ å‡¦åˆ†", "ç›¸ç¶š ä¸å‹•ç”£", "å®Ÿå®¶ å£²å´"],
    category: "ç›¸ç¶šæ‰‹ç¶šã",
    searchVolume: "high",
    difficulty: "ä¸­ç´š"
  }
];

// SEOæœ€é©åŒ–ã•ã‚ŒãŸè¨˜äº‹ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
function generateSEOPrompt(topic) {
  return `ã‚ãªãŸã¯çµ‚æ´»ãƒ»ç›¸ç¶šåˆ†é‡ã®SEOå°‚é–€ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚ä»¥ä¸‹ã®æ¡ä»¶ã§ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ä¸Šä½è¡¨ç¤ºã‚’ç‹™ãˆã‚‹é«˜å“è³ªãªè¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€è¨˜äº‹æƒ…å ±ã€‘
ã‚¿ã‚¤ãƒˆãƒ«: ${topic.title}
ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ${topic.keywords[0]}
é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ${topic.keywords.slice(1).join(', ')}
ã‚«ãƒ†ã‚´ãƒª: ${topic.category}
æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ : ${topic.searchVolume}

ã€SEOæœ€é©åŒ–ã®å¿…é ˆè¦ä»¶ã€‘

1. **ã‚¿ã‚¤ãƒˆãƒ«ã‚¿ã‚°æœ€é©åŒ–**
   - ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å¿…ãšå«ã‚ã‚‹
   - 32æ–‡å­—ä»¥å†…ã§èˆˆå‘³ã‚’å¼•ã
   - æ•°å­—ã‚„ã€ã€‘ã‚’åŠ¹æœçš„ã«ä½¿ç”¨

2. **è¦‹å‡ºã—æ§‹é€ ï¼ˆé‡è¦ï¼‰**
   - H1: ã‚¿ã‚¤ãƒˆãƒ«ã¨åŒã˜
   - H2: 5-8å€‹ï¼ˆå„è¦‹å‡ºã—ã«é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è‡ªç„¶ã«å«ã‚ã‚‹ï¼‰
   - H3: å¿…è¦ã«å¿œã˜ã¦2-3å€‹

3. **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¯†åº¦**
   - ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: 2-3%
   - é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: å„1-2%
   - è‡ªç„¶ãªæ–‡ç« ã‚’ä¿ã¡ãªãŒã‚‰é…ç½®

4. **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ§‹æˆï¼ˆ4000-5000æ–‡å­—ï¼‰**
   - å°å…¥éƒ¨: èª­è€…ã®æ‚©ã¿ã«å…±æ„Ÿã—ã€ã“ã®è¨˜äº‹ã§è§£æ±ºã§ãã‚‹ã“ã¨ã‚’æ˜ç¤ºï¼ˆ200æ–‡å­—ï¼‰
   - æœ¬æ–‡: å…·ä½“çš„ã§å®Ÿç”¨çš„ãªæƒ…å ±ã‚’è«–ç†çš„ã«å±•é–‹
   - ã¾ã¨ã‚: è¦ç‚¹ã‚’ç®‡æ¡æ›¸ãã§æ•´ç†ï¼ˆ300æ–‡å­—ï¼‰

5. **E-E-A-Tå¯¾ç­–**
   - Experienceï¼ˆçµŒé¨“ï¼‰: å®Ÿä¾‹ã‚„ä½“é¨“è«‡ã‚’å«ã‚ã‚‹
   - Expertiseï¼ˆå°‚é–€æ€§ï¼‰: æ­£ç¢ºãªæ³•å¾‹ãƒ»åˆ¶åº¦æƒ…å ±ã‚’è¨˜è¼‰
   - Authoritativenessï¼ˆæ¨©å¨æ€§ï¼‰: å…¬çš„æ©Ÿé–¢ã®æƒ…å ±ã‚’å¼•ç”¨
   - Trustworthinessï¼ˆä¿¡é ¼æ€§ï¼‰: æœ€æ–°ã®æƒ…å ±ï¼ˆ2024å¹´ï¼‰ã§ã‚ã‚‹ã“ã¨ã‚’æ˜è¨˜

6. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ**
   - ç›®æ¬¡ã‚’å†’é ­ã«é…ç½®ï¼ˆèª­è€…ã®åˆ©ä¾¿æ€§å‘ä¸Šï¼‰
   - FAQå½¢å¼ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å«ã‚ã‚‹
   - ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚„è¡¨ã‚’æ´»ç”¨
   - è¡Œå‹•ã‚’ä¿ƒã™CTAã‚’é…ç½®

7. **å†…éƒ¨ãƒªãƒ³ã‚¯å¯¾ç­–**
   - é–¢é€£ã™ã‚‹ä»–ã®è¨˜äº‹ã¸ã®è‡ªç„¶ãªãƒªãƒ³ã‚¯ã‚’3-5å€‹å«ã‚ã‚‹
   - ã‚¢ãƒ³ã‚«ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã¯èª¬æ˜çš„ã«

8. **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ**
   - FAQã€HowToã€è¨˜äº‹ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œã—ãŸè¨˜è¿°

9. **ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**
   - çŸ­ã„æ®µè½ï¼ˆ3-4è¡Œï¼‰
   - ç®‡æ¡æ›¸ãã‚’å¤šç”¨
   - é‡è¦ãªæƒ…å ±ã¯å¤ªå­—ã§å¼·èª¿

10. **æ¤œç´¢æ„å›³ã®å®Œå…¨æº€è¶³**
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ±‚ã‚ã‚‹æƒ…å ±ã‚’ç¶²ç¾…çš„ã«æä¾›
    - æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ˜ç¢ºã«æç¤º

ã€è¨˜äº‹ã®åŸºæœ¬æ§‹é€ ã€‘

# ${topic.title}

## ç›®æ¬¡
- [è¦‹å‡ºã—1]
- [è¦‹å‡ºã—2]
- ...

å°å…¥æ–‡ï¼ˆ200æ–‡å­—ç¨‹åº¦ã§èª­è€…ã®æ‚©ã¿ã«å…±æ„Ÿï¼‰

## ãƒ¡ã‚¤ãƒ³è¦‹å‡ºã—1ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€ï¼‰
å…·ä½“çš„ãªå†…å®¹...

### ã‚µãƒ–è¦‹å‡ºã—ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
è©³ç´°æƒ…å ±...

## ãƒ¡ã‚¤ãƒ³è¦‹å‡ºã—2ï¼ˆé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€ï¼‰
å…·ä½“çš„ãªå†…å®¹...

## ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰
Q1: è³ªå•å†…å®¹
A1: å›ç­”å†…å®¹

## ã¾ã¨ã‚ï½œä»Šã™ãã§ãã‚‹â—‹ã¤ã®ãƒã‚¤ãƒ³ãƒˆ
- ãƒã‚¤ãƒ³ãƒˆ1
- ãƒã‚¤ãƒ³ãƒˆ2
- ...

## LAST LETTERã‚µãƒ¼ãƒ“ã‚¹ã®ç´¹ä»‹ï¼ˆè‡ªç„¶ã«ï¼‰
è¨˜äº‹å†…å®¹ã«é–¢é€£ã—ã¦ã€LAST LETTERã‚µãƒ¼ãƒ“ã‚¹ãŒã©ã†å½¹ç«‹ã¤ã‹ã‚’èª¬æ˜ã€‚

ã€å‡ºåŠ›å½¢å¼ã€‘
Markdownå½¢å¼ã§ã€SEOã«æœ€é©åŒ–ã•ã‚ŒãŸå®Œå…¨ãªè¨˜äº‹ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚`;
}

// è¨˜äº‹ç”Ÿæˆã¨ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
async function generateSEOArticle(topic, index) {
  try {
    console.log(`ğŸš€ SEOè¨˜äº‹ç”Ÿæˆé–‹å§‹ [${index + 1}]: ${topic.title}`);
    
    const prompt = generateSEOPrompt(topic);
    
    const completion = await openai.chat.completions.create({
      model: "gpt-4-turbo-preview",
      messages: [
        {
          role: "system",
          content: "ã‚ãªãŸã¯çµ‚æ´»ãƒ»ç›¸ç¶šåˆ†é‡ã®SEOå°‚é–€ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚Googleæ¤œç´¢ã§1ä½ã‚’ç²å¾—ã§ãã‚‹ã€èª­è€…ã«ä¾¡å€¤ã‚’æä¾›ã™ã‚‹è¨˜äº‹ã‚’ä½œæˆã—ã¾ã™ã€‚"
        },
        {
          role: "user",
          content: prompt
        }
      ],
      max_tokens: 4000,
      temperature: 0.7,
    });

    const articleContent = completion.choices[0].message.content;
    
    // Frontmatterã‚’ç”Ÿæˆ
    const date = new Date();
    date.setDate(date.getDate() + index); // æ—¥ä»˜ã‚’ãšã‚‰ã™
    const dateStr = date.toISOString().split('T')[0];
    
    const frontmatter = `---
title: "${topic.title}"
date: "${dateStr}"
category: "${topic.category}"
keywords: [${topic.keywords.map(k => `"${k}"`).join(', ')}]
description: "${topic.title.substring(0, 120)}..."
---

`;

    const content = frontmatter + articleContent;
    const filename = `${dateStr}-seo-${topic.keywords[0].replace(/\s+/g, '-')}.md`;
    const filepath = path.join(process.cwd(), 'articles', filename);
    
    fs.writeFileSync(filepath, content, 'utf-8');
    console.log(`âœ… SEOè¨˜äº‹ç”Ÿæˆå®Œäº†: ${filename}`);
    
    return { success: true, filename };
    
  } catch (error) {
    console.error(`âŒ è¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${topic.title}`, error.message);
    return { success: false, error: error.message };
  }
}

// ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œé–¢æ•°
async function generateSEOArticles() {
  console.log(`ğŸ¯ SEOæœ€é©åŒ–è¨˜äº‹ã®å¤§é‡ç”Ÿæˆé–‹å§‹`);
  console.log(`ğŸ“Š ç”Ÿæˆäºˆå®š: ${seoTopics.length}è¨˜äº‹`);
  
  const results = [];
  
  // ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’è¨­å®šï¼ˆAPIåˆ¶é™ã‚’è€ƒæ…®ï¼‰
  const batchSize = 5;
  
  for (let i = 0; i < seoTopics.length; i += batchSize) {
    const batch = seoTopics.slice(i, i + batchSize);
    console.log(`\nğŸ“¦ ãƒãƒƒãƒ ${Math.floor(i / batchSize) + 1} å‡¦ç†ä¸­...`);
    
    // ãƒãƒƒãƒå†…ã®è¨˜äº‹ã‚’é †æ¬¡ç”Ÿæˆ
    for (let j = 0; j < batch.length; j++) {
      const result = await generateSEOArticle(batch[j], i + j);
      results.push(result);
      
      // APIåˆ¶é™å¯¾ç­–
      if (j < batch.length - 1) {
        console.log('â³ APIåˆ¶é™å¯¾ç­–ã§5ç§’å¾…æ©Ÿ...');
        await new Promise(resolve => setTimeout(resolve, 5000));
      }
    }
    
    // ãƒãƒƒãƒé–“ã®å¾…æ©Ÿ
    if (i + batchSize < seoTopics.length) {
      console.log('â³ æ¬¡ã®ãƒãƒƒãƒã¾ã§10ç§’å¾…æ©Ÿ...');
      await new Promise(resolve => setTimeout(resolve, 10000));
    }
  }
  
  // çµæœã‚µãƒãƒªãƒ¼
  const successful = results.filter(r => r.success).length;
  console.log('\nğŸ“ˆ SEOè¨˜äº‹ç”Ÿæˆå®Œäº†ã‚µãƒãƒªãƒ¼:');
  console.log(`âœ… æˆåŠŸ: ${successful}/${seoTopics.length}è¨˜äº‹`);
  
  if (successful > 0) {
    console.log('\nğŸ‰ SEOæœ€é©åŒ–ã•ã‚ŒãŸçµ‚æ´»è¨˜äº‹ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼');
    console.log('ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:');
    console.log('  1. ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ã‚’ç¢ºèª');
    console.log('  2. ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã‚’æ›´æ–°');
    console.log('  3. Google Search Consoleã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²');
  }
}

// å®Ÿè¡Œ
if (require.main === module) {
  if (!process.env.OPENAI_API_KEY) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼: OPENAI_API_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
    process.exit(1);
  }
  
  generateSEOArticles().catch(error => {
    console.error('âŒ è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼:', error);
    process.exit(1);
  });
}

module.exports = { generateSEOArticles, seoTopics };